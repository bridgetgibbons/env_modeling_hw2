---
title: "climate_crop_model"
author: "Bridget Gibbons"
date: "4/10/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Loading in the climate data provided (clim.txt): 

```{r}

library(tidyverse)
clim = data.frame(read_csv("clim.csv"))


clim_month = clim %>% 
  group_by(month, year) %>% 
  summarize(meantmax = mean(tmax_c), meantmin = mean(tmin_c), precip=mean(precip)) 

## gives average monthly maximum and minimum daily temperatures, and monthly precipitation from a data frame called clim


## Filtering the data frame for only temperatures in month 1 and precipitation in month 2.

clim_mintemp = clim_month %>% 
  select("month", "year", "meantmin") %>% 
  filter(month == 2) %>% 
  rename(month_temp = month)

clim_precip = clim_month %>% 
  select("month", "year", "precip") %>% 
  filter(month == 1) %>% 
  rename(month_precip = month)

## Now combining the two data frames above into one usable data frame, "clim_joined":

clim_joined <- clim_mintemp %>% 
  inner_join(clim_precip, by = c("year"))

clim_joined <- clim_joined %>% 
  ungroup() %>% 
  select(-"month_temp", -"month_precip")


```

# Bringing in our model from our .R file:

```{r}

source("yield_function_bg.R")

yield_function_bg(climate = clim)

```

# 3. 
## Using our model to estimate how almond yield anomalies for each year in the record:

```{r}

## for the input "precipitation" in the model
## precipitation = clim_month_1and2$precip

```


## Graphing the results:

```{r}

library(ggplot2)



```


# 4.
## Estimating the mean annual yield anomaly if the last 20 years had been 2C warmer:

```{r}



```

# 5.
## Varying one of the parameters by sampling from a normal distribution; with mean the value from Lobell et al., (2006) and standard deviation 10% of the mean

```{r}



```

## Creating a box plot of mean annual yield anomaly for baseline and 2C climate (boxes show variation due to uncertainty in the parameter):

```{r}



```
